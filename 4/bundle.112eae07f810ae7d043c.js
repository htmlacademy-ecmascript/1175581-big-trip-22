(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}class n{getTemplate(){return'<section class="trip-main__trip-info  trip-info">\n  <div class="trip-info__main">\n    <h1 class="trip-info__title">Amsterdam &mdash; Chamonix &mdash; Geneva</h1>\n\n    <p class="trip-info__dates">18&nbsp;&mdash;&nbsp;20 Mar</p>\n  </div>\n\n  <p class="trip-info__cost">\n    Total: &euro;&nbsp;<span class="trip-info__cost-value">1230</span>\n  </p>\n</section>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class i{getTemplate(){return'<form class="trip-filters" action="#" method="get">\n    <div class="trip-filters__filter">\n      <input id="filter-everything" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="everything">\n      <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-future" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="future">\n      <label class="trip-filters__filter-label" for="filter-future">Future</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-present" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="present">\n      <label class="trip-filters__filter-label" for="filter-present">Present</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-past" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="past" checked>\n      <label class="trip-filters__filter-label" for="filter-past">Past</label>\n    </div>\n\n    <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class s{getTemplate(){return'          <form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n    <div class="trip-sort__item  trip-sort__item--day">\n      <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day">\n      <label class="trip-sort__btn" for="sort-day">Day</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--event">\n      <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n      <label class="trip-sort__btn" for="sort-event">Event</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--time">\n      <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n      <label class="trip-sort__btn" for="sort-time">Time</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--price">\n      <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price" checked>\n      <label class="trip-sort__btn" for="sort-price">Price</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--offer">\n      <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n      <label class="trip-sort__btn" for="sort-offer">Offers</label>\n    </div>\n  </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElelement(){this.element=null}}class l{getTemplate(){return'<ul class="trip-events__list">\n  </ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class a{constructor(e){this.data=e}getTemplate(){return function(e){const{basePrice:t,dateFrom:n,dateTo:i,isFavorite:s,type:l}=e.events;return`<li class="trip-events__item">\n  <div class="event">\n    <time class="event__date" datetime="2019-03-18">date</time>\n    <div class="event__type">\n      <img class="event__type-icon" width="42" height="42" src="img/icons/${l.toLowerCase()}.png" alt="Event type icon">\n    </div>\n    <h3 class="event__title">${l} ${e.destination.name}</h3>\n    <div class="event__schedule">\n      <p class="event__time">\n        <time class="event__start-time" datetime="2019-03-18T10:30">${n}</time>\n        &mdash;\n        <time class="event__end-time" datetime="2019-03-18T11:00">${i}</time>\n      </p>\n      <p class="event__duration">durationTime</p>\n    </div>\n    <p class="event__price">\n      &euro;&nbsp;<span class="event__price-value">${t}</span>\n    </p>\n    <h4 class="visually-hidden">Offers:</h4>\n    <ul class="event__selected-offers">\n      ${e.offers.map((e=>function(e){return`<li class="event__offer">\n  <span class="event__offer-title">${e.title}</span>\n  &plus;&euro;&nbsp;\n  <span class="event__offer-price">${e.price}</span>\n</li>`}(e))).join("")}\n    </ul>\n    <button class="event__favorite-btn ${s?"event__favorite-btn--active":""}" type="button">\n      <span class="visually-hidden">Add to favorite</span>\n      <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n        <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n      </svg>\n    </button>\n    <button class="event__rollup-btn" type="button">\n      <span class="visually-hidden">Open event</span>\n    </button>\n  </div>\n</li>`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class r{constructor(e){this.data=e}getTemplate(){return function(e){const{offers:t,destination:n,destinations:i,formEvent:s,types:l}=e,{basePrice:a,dateFrom:r,dateTo:o,type:c}=s,p=n.pictures;return`<li class="trip-events__item">\n  <form class="event event--edit" action="#" method="post">\n    <header class="event__header">\n      <div class="event__type-wrapper">\n        <label class="event__type  event__type-btn" for="event-type-toggle-1">\n          <span class="visually-hidden">Choose event type</span>\n          <img class="event__type-icon" width="17" height="17" src="img/icons/${c}.png" alt="Event type icon">\n        </label>\n        <input class="event__type-toggle  visually-hidden" id="event-type-toggle-1" type="checkbox">\n\n        <div class="event__type-list">\n          <fieldset class="event__type-group">\n            <legend class="visually-hidden">Event type</legend>\n            ${l.map((e=>function(e){return`<div class="event__type-item">\n  <input id="event-type-${e}-1" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}">\n  <label class="event__type-label  event__type-label--${e}" for="event-type-"${e}"-1">${e[0].toUpperCase()+e.substring(1)}</label>\n</div>`}(e))).join("")}\n          </fieldset>\n        </div>\n      </div>\n\n      <div class="event__field-group  event__field-group--destination">\n        <label class="event__label  event__type-output" for="event-destination-1">\n        </label>\n        <input class="event__input  event__input--destination" id="event-destination-1" type="text" name="event-destination" value="${n.name}" list="destination-list-1">\n        <datalist id="destination-list-1">\n          ${i.map((e=>function(e){return`\n  <option value="${e.name}"></option>`}(e))).join("")}\n        </datalist>\n      </div>\n\n      <div class="event__field-group  event__field-group--time">\n        <label class="visually-hidden" for="event-start-time-1">From</label>\n        <input class="event__input  event__input--time" id="event-start-time-1" type="text" name="event-start-time" value="${r}">\n        &mdash;\n        <label class="visually-hidden" for="event-end-time-1">To</label>\n        <input class="event__input  event__input--time" id="event-end-time-1" type="text" name="event-end-time" value="${o}">\n      </div>\n\n      <div class="event__field-group  event__field-group--price">\n        <label class="event__label" for="event-price-1">\n          <span class="visually-hidden">Price</span>\n          &euro;\n        </label>\n        <input class="event__input  event__input--price" id="event-price-1" type="text" name="event-price" value="${a}">\n      </div>\n\n      <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n      <button class="event__reset-btn" type="reset">Cancel</button>\n    </header>\n    <section class="event__details">\n      <section class="event__section  event__section--offers">\n        <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n\n        <div class="event__available-offers">\n      ${t.map((e=>function(e){return`<div class="event__offer-selector">\n  <input class="event__offer-checkbox  visually-hidden" id="event-offer-meal-1" type="checkbox" name="event-offer-meal">\n  <label class="event__offer-label" for="event-offer-meal-1">\n    <span class="event__offer-title">${e.title}</span>\n    &plus;&euro;&nbsp;\n    <span class="event__offer-price">${e.price}</span>\n  </label>\n</div>`}(e))).join("")}\n        </div>\n      </section>\n\n      <section class="event__section  event__section--destination">\n        <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n        <p class="event__destination-description">${n.description}</p>\n\n        <div class="event__photos-container">\n          <div class="event__photos-tape">\n          ${p.map((e=>function(e){return`\n <img class="event__photo" src="${e.src}" alt="Event photo">`}(e))).join("")}\n          </div>\n        </div>\n      </section>\n    </section>\n  </form>\n</li>\n`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const o=[{id:"f4b62099-293f-4c3d-a700-94eec4a2808c",basePrice:110,dateFrom:"19/03/19 00:00",dateTo:"20/03/19 00:00",destination:"cfe416cq-10xa-ye10-8077-2fs9a01edcab",offers:["b4c3e4e6-9053-42ce-b747-e281314baa01","b4c3e4e6-9053-42ce-b747-e281314baa02"],type:"taxi"},{id:"f4b62099-293f-4c3d-a701-94eec4a2808c",basePrice:654,dateFrom:"21/03/19 00:00",dateTo:"22/03/19 00:00",destination:"cfe416cq-11xa-ye10-8077-2fs9a01edcab",isFavorite:!0,offers:["b4c3e4e6-9053-42ce-b747-e281314baa05"],type:"bus"},{id:"f4b62099-293f-4c3d-a702-94eec4a2808c",basePrice:878,dateFrom:"23/03/19 00:00",dateTo:"24/03/19 00:00",destination:"cfe416cq-12xa-ye10-8077-2fs9a01edcab",isFavorite:!1,offers:[],type:"flight"}],c=[{type:"taxi",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa01",title:"1(taxi)",price:6456},{id:"b4c3e4e6-9053-42ce-b747-e281314baa02",title:"2(taxi)",price:6345},{id:"b4c3e4e6-9053-42ce-b747-e281314baa03",title:"3(taxi)",price:6746}]},{type:"bus",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa04",title:"1(bus)",price:667},{id:"b4c3e4e6-9053-42ce-b747-e281314baa05",title:"2(bus)",price:789},{id:"b4c3e4e6-9053-42ce-b747-e281314baa06",title:"3(bus)",price:678}]},{type:"ship",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa07",title:"1(ship)",price:6456},{id:"b4c3e4e6-9053-42ce-b747-e281314baa08",title:"2(ship)",price:6080},{id:"b4c3e4e6-9053-42ce-b747-e281314baa09",title:"3(ship)",price:66789}]},{type:"drive",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa10",title:"1(drive)",price:6425},{id:"b4c3e4e6-9053-42ce-b747-e281314baa11",title:"2(drive)",price:634},{id:"b4c3e4e6-9053-42ce-b747-e281314baa12",title:"3(drive)",price:13}]},{type:"flight",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa13",title:"1(flight)",price:234},{id:"b4c3e4e6-9053-42ce-b747-e281314baa14",title:"2(flight)",price:534},{id:"b4c3e4e6-9053-42ce-b747-e281314baa15",title:"3(flight)",price:47567}]},{type:"check-in",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa16",title:"1(check-in)",price:67457},{id:"b4c3e4e6-9053-42ce-b747-e281314baa17",title:"2(check-in)",price:456},{id:"b4c3e4e6-9053-42ce-b747-e281314baa18",title:"3(check-in)",price:45645}]},{type:"sightseeing",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa19",title:"1(sightseeing)",price:56},{id:"b4c3e4e6-9053-42ce-b747-e281314baa20",title:"2(sightseeing)",price:456},{id:"b4c3e4e6-9053-42ce-b747-e281314baa21",title:"3(sightseeing)",price:234}]},{type:"Restaurant",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa22",title:"1(Restaurant)",price:98},{id:"b4c3e4e6-9053-42ce-b747-e281314baa23",title:"2(Restaurant)",price:567},{id:"b4c3e4e6-9053-42ce-b747-e281314baa24",title:"3(Restaurant)",price:768}]}],p=()=>Math.floor(99*Math.random()),d=[{id:"cfe416cq-10xa-ye10-8077-2fs9a01edcab",description:"город и коммуна на востоке Франции, в департаменте Верхняя Савойя (историческая область Савойя).",name:"Chamonix",pictures:[{src:`https://loremflickr.com/248/152?random=${p()}`,description:"Chamonix parliament building"}]},{id:"cfe416cq-11xa-ye10-8077-2fs9a01edcab",description:"столица и крупнейший город Нидерландов. Является столицей королевства с 1814 года.",name:"Amsterdam",pictures:[{src:`https://loremflickr.com/248/152?random=${p()}`,description:"Chamonix parliament building"}]},{id:"cfe416cq-12xa-ye10-8077-2fs9a01edcab",description:"город на юго-западе Швейцарии. Столица одноимённого франкоязычного кантона и административный центр одноимённой коммуны.",name:"Geneva",pictures:[{src:`https://loremflickr.com/248/152?random=${p()}`,description:"Chamonix parliament building"}]}],v=document.querySelector(".trip-controls__filters"),f=document.querySelector(".trip-main"),_=document.querySelector(".trip-events"),m=new class{events=o;offers=c;destinations=d;formEvent=(e=>e[Math.floor(Math.random()*(e.length-1))])(o);getEvents(){return this.events}getOffers(){return this.offers}getTypes(){return c.map((e=>e.type))}getOffersByType(e){return c.find((t=>e.type===t.type)).offers}getOffersById(e){const t=c.find((t=>e.type===t.type));return e.offers.map((e=>t.offers.find((t=>e===t.id))))}getDestinations(){return this.destinations}getDestinationById(e){return d.find((t=>e.destination===t.id))}getFormEvent(){return this.formEvent}},u=new class{eventsListComponent=new l;constructor({tripElement:e,eventsElement:t,filtersElement:n,eventsModel:i}){this.tripElement=e,this.filtersElement=n,this.eventsElement=t,this.eventsModel=i}init(){this.events=[...this.eventsModel.getEvents()],this.formEvent=this.eventsModel.getFormEvent(),t(new n,this.tripElement,"afterbegin"),t(new i,this.filtersElement),t(new s,this.eventsElement),t(this.eventsListComponent,this.eventsElement),t(new r({types:this.eventsModel.getTypes(),offers:this.eventsModel.getOffersByType(this.formEvent),destination:this.eventsModel.getDestinationById(this.formEvent),destinations:this.eventsModel.getDestinations(),formEvent:this.formEvent}),this.eventsListComponent.getElement());for(let e=0;e<this.events.length;e++)t(new a({destination:this.eventsModel.getDestinationById(this.events[e]),offers:this.eventsModel.getOffersById(this.events[e]),events:this.events[e]}),this.eventsListComponent.getElement())}}({tripElement:f,eventsElement:_,filtersElement:v,eventsModel:m});u.init()})();
//# sourceMappingURL=bundle.112eae07f810ae7d043c.js.map